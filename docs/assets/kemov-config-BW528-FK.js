import{u as x,R as U,y as J,j as C,O as Y,l as P,K as Z,al as ee,C as te,p as ne,v as q,E as oe,k as re,d as F,r as f,o as A,c as E,w as p,b as ae,g as se,F as le,h as u,f as ie,A as ce,am as ue,an as de,N as fe,i as pe,a as T,ab as M,a6 as me,t as ve}from"./kemov-_plugin-vue_export-helper-UeGyvY2D.js";import{u as ge}from"./kemov-main-BkLIkeJF.js";function _e(e){return ee()?(te(e),!0):!1}function j(e){return typeof e=="function"?e():x(e)}const he=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const we=Object.prototype.toString,ye=e=>we.call(e)==="[object Object]",R=()=>{};function be(e,n){function t(...r){return new Promise((a,o)=>{Promise.resolve(e(()=>n.apply(this,r),{fn:n,thisArg:this,args:r})).then(a).catch(o)})}return t}const G=e=>e();function Se(e=G){const n=C(!0);function t(){n.value=!1}function r(){n.value=!0}const a=(...o)=>{n.value&&e(...o)};return{isActive:Y(n),pause:t,resume:r,eventFilter:a}}function ke(e){return Z()}function Ae(e,n,t={}){const{eventFilter:r=G,...a}=t;return P(e,be(r,n),a)}function Ee(e,n,t={}){const{eventFilter:r,...a}=t,{eventFilter:o,pause:l,resume:c,isActive:m}=Se(r);return{stop:Ae(e,n,{...a,eventFilter:o}),pause:l,resume:c,isActive:m}}function Ce(e,n=!0,t){ke()?U(e,t):n?e():J(e)}function Be(e,n,t){let r;ne(t)?r={evaluating:t}:r={};const{lazy:a=!1,evaluating:o=void 0,shallow:l=!0,onError:c=R}=r,m=C(!a),d=l?q(n):C(n);let i=0;return oe(async v=>{if(!m.value)return;i++;const w=i;let h=!1;o&&Promise.resolve().then(()=>{o.value=!0});try{const _=await e(b=>{v(()=>{o&&(o.value=!1),h||b()})});w===i&&(d.value=_)}catch(_){c(_)}finally{o&&w===i&&(o.value=!1),h=!0}}),a?re(()=>(m.value=!0,d.value)):d}function Ie(e){var n;const t=j(e);return(n=t==null?void 0:t.$el)!=null?n:t}const V=he?window:void 0;function D(...e){let n,t,r,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,r,a]=e,n=V):[n,t,r,a]=e,!n)return R;Array.isArray(t)||(t=[t]),Array.isArray(r)||(r=[r]);const o=[],l=()=>{o.forEach(i=>i()),o.length=0},c=(i,v,w,h)=>(i.addEventListener(v,w,h),()=>i.removeEventListener(v,w,h)),m=P(()=>[Ie(n),j(a)],([i,v])=>{if(l(),!i)return;const w=ye(v)?{...v}:v;o.push(...t.flatMap(h=>r.map(_=>c(i,h,_,w))))},{immediate:!0,flush:"post"}),d=()=>{m(),l()};return _e(d),d}const O=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$="__vueuse_ssr_handlers__",Me=Ne();function Ne(){return $ in O||(O[$]=O[$]||{}),O[$]}function Oe(e,n){return Me[e]||n}function $e(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const xe={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},W="vueuse-storage";function De(e,n,t,r={}){var a;const{flush:o="pre",deep:l=!0,listenToStorageChanges:c=!0,writeDefaults:m=!0,mergeDefaults:d=!1,shallow:i,window:v=V,eventFilter:w,onError:h=s=>{console.error(s)},initOnMounted:_}=r,b=(i?q:C)(n);if(!t)try{t=Oe("getDefaultStorage",()=>{var s;return(s=V)==null?void 0:s.localStorage})()}catch(s){h(s)}if(!t)return b;const S=j(n),L=$e(S),I=(a=r.serializer)!=null?a:xe[L],{pause:H,resume:z}=Ee(b,()=>K(b.value),{flush:o,deep:l,eventFilter:w});v&&c&&Ce(()=>{t instanceof Storage?D(v,"storage",N):D(v,W,X),_&&N()}),_||N();function B(s,g){if(v){const y={key:e,oldValue:s,newValue:g,storageArea:t};v.dispatchEvent(t instanceof Storage?new StorageEvent("storage",y):new CustomEvent(W,{detail:y}))}}function K(s){try{const g=t.getItem(e);if(s==null)B(g,null),t.removeItem(e);else{const y=I.write(s);g!==y&&(t.setItem(e,y),B(g,y))}}catch(g){h(g)}}function Q(s){const g=s?s.newValue:t.getItem(e);if(g==null)return m&&S!=null&&t.setItem(e,I.write(S)),S;if(!s&&d){const y=I.read(g);return typeof d=="function"?d(y,S):L==="object"&&!Array.isArray(y)?{...S,...y}:y}else return typeof g!="string"?g:I.read(g)}function N(s){if(!(s&&s.storageArea!==t)){if(s&&s.key==null){b.value=S;return}if(!(s&&s.key!==e)){H();try{(s==null?void 0:s.newValue)!==I.write(b.value)&&(b.value=Q(s))}catch(g){h(g)}finally{s?J(z):z()}}}}function X(s){N(s.detail)}return b}const Fe=F({__name:"StreamerListItem",props:{pageId:null},setup(e){const n=ce("streamerChannels");return(t,r)=>{const a=f("v-img"),o=f("v-avatar"),l=f("v-list-item"),c=f("v-progress-circular"),m=f("v-list");return A(),E(m,{nav:"",link:"","active-class":"bg-primary",density:"compact",class:"flex-grow-1 flex-shrink-1 overflow-auto",role:"menu"},{default:p(()=>{var d;return[(A(!0),ae(le,null,se(x(n),i=>(A(),E(l,{key:i.id,title:i.name,subtitle:i.globalname,href:`/kemov/stats/detail/#/${i.id}`,active:e.pageId===`stats/detail/${i.id}`,role:"menuitem"},{prepend:p(()=>[u(o,{color:i.color.key,variant:"outlined",size:"small"},{default:p(()=>[u(a,{src:i.thumbnails.default.url,alt:i.fullname},null,8,["src","alt"])]),_:2},1032,["color"])]),_:2},1032,["title","subtitle","href","active"]))),128)),((d=x(n))==null?void 0:d.length)===0?(A(),E(l,{key:0,class:"pa-4 text-center"},{default:p(()=>[u(c,{color:"primary",indeterminate:""})]),_:1})):ie("",!0)]}),_:1})}}}),Te=F({__name:"NavigationDrawer",props:ue({pageId:null},{opened:{type:Boolean},openedModifiers:{}}),emits:["update:opened"],setup(e){const n=de(e,"opened");return(t,r)=>{const a=f("v-icon"),o=f("v-list-item"),l=f("v-divider"),c=f("v-list"),m=f("v-navigation-drawer");return A(),E(m,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=d=>n.value=d),floating:"","aria-label":"サイトページ一覧"},{default:p(()=>[u(c,{class:"pb-0 d-flex flex-column fill-height",role:"menu"},{default:p(()=>[u(o,{link:"",title:"リアルタイム統計",href:"/kemov/stats/",role:"menuitem",active:e.pageId==="stats"},{prepend:p(()=>[u(a,{icon:"mdi-finance",size:"large"})]),_:1},8,["active"]),u(Fe,{pageId:e.pageId},null,8,["pageId"]),u(l),u(c,{density:"compact",link:"",nav:"",class:"flex-grow-0 flex-shrink-0",role:"menu"},{default:p(()=>[u(o,{title:"ジェネット楽曲一覧",href:"/kemov/genet/music/",role:"menuitem",active:e.pageId==="genet/music"},{prepend:p(()=>[u(a,{icon:"mdi-music",size:"small"})]),_:1},8,["active"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),k="vuetify-color-scheme",Ve=F({__name:"ThemeToggleButton",setup(e){const n=ge();function t(l){l==="unspecified"?(n.global.name.value="",document.querySelectorAll(".color-responsive").forEach(c=>{c.classList.remove(".color-responsive-dark",".color-responsive-light")})):(n.global.name.value=l,document.querySelectorAll(".color-responsive").forEach(c=>{l==="light"?(c.classList.add(".color-responsive-light"),c.classList.remove(".color-responsive-dark")):(c.classList.add(".color-responsive-dark"),c.classList.remove(".color-responsive-light"))}))}function r(){return window.matchMedia?window.matchMedia("(prefers-color-scheme: light)").matches?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"unspecified":"unspecified"}function a(){n.global.current.value.dark?(r()==="light"?localStorage.removeItem(k):localStorage.setItem(k,"light"),t("light")):(r()==="dark"?localStorage.removeItem(k):localStorage.setItem(k,"dark"),t("dark"))}function o(l){const c=localStorage.getItem(k);c===null?t(l.matches?"dark":"light"):(c==="dark"&&l.matches||c==="light"&&!l.matches)&&localStorage.removeItem(k)}return U(()=>{window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o);const l=localStorage.getItem(k);l==="light"?t("light"):l==="dark"||r()==="dark"?t("dark"):t("light")}),fe(()=>{window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",o)}),(l,c)=>{const m=f("v-btn"),d=f("v-tooltip");return A(),E(d,{text:"テーマを切り替え","aria-label":"テーマを切り替え"},{activator:p(({props:i})=>[u(m,pe(i,{icon:x(n).global.current.value.dark?"mdi-weather-night":"mdi-white-balance-sunny",onClick:a,"aria-label":"テーマを切り替え"}),null,16,["icon"])]),_:1})}}}),We=F({__name:"AppBase",props:{pageId:null,toolbarTitle:null},setup(e,{expose:n}){const t=C(),r=C();return n({showErrorSnackbar:function(){r.value=!0},closeErrorSnackbar:function(){r.value=!1}}),(a,o)=>{const l=f("v-btn"),c=f("v-snackbar"),m=f("v-app-bar-nav-icon"),d=f("v-toolbar-title"),i=f("v-app-bar"),v=f("v-container"),w=f("v-main"),h=f("v-app");return A(),E(h,null,{default:p(()=>[u(Te,{opened:t.value,"onUpdate:opened":o[0]||(o[0]=_=>t.value=_),pageId:e.pageId},null,8,["opened","pageId"]),u(c,{modelValue:r.value,"onUpdate:modelValue":o[2]||(o[2]=_=>r.value=_),timeout:"10000"},{actions:p(()=>[u(l,{color:"red-lighten-2",variant:"text",onClick:o[1]||(o[1]=_=>r.value=!1)},{default:p(()=>o[5]||(o[5]=[T("閉じる")])),_:1})]),default:p(()=>[M(a.$slots,"errorSnackbar",{},()=>[o[4]||(o[4]=T("データの読み込みができませんでした。しばらくしてから再読み込みしてください。"))])]),_:3},8,["modelValue"]),u(w,null,{default:p(()=>[u(i,{flat:"",floating:"",density:"compact"},{append:p(()=>[M(a.$slots,"toolbar"),u(Ve)]),default:p(()=>[u(m,{variant:"text",onClick:o[3]||(o[3]=me(_=>t.value=!t.value,["stop"])),"aria-label":"ナビゲーションを表示"}),u(d,null,{default:p(()=>[T(ve(e.toolbarTitle),1)]),_:1})]),_:3}),M(a.$slots,"header"),u(v,{class:"bg-containerBackground"},{default:p(()=>[M(a.$slots,"default")]),_:3}),M(a.$slots,"footer")]),_:3})]),_:3})}}}),Ue="https://nanase.cc/asset/kemov/channels.json",Je="https://d1zvseiqyto6c5.cloudfront.net/kemov/stats.json",je="https://d1zvseiqyto6c5.cloudfront.net/kemov/stats/video/";function Pe(e){return`${je}${e}.json`}export{We as _,Be as a,Ue as c,Je as s,De as u,Pe as v};
