import{d as B,m as O,o as d,c as N,w as n,n as Q,u as m,a as g,t as p,r as a,b as k,e as s,f as h,g as W,F as X,h as t,i as Z,j as b,k as G,l as J,p as tt,q as et,s as nt}from"./kemov-runtime-dom.esm-bundler-R8CT9h3s.js";import{c as y,a as st,b as at,d as ot}from"./kemov-main-obZS8aFE.js";import{w as $,a as L,_ as lt,b as it,c as ct,s as rt}from"./kemov-index-9p6Bm3MS.js";import{s as C,d as M,a as q,m as ut}from"./kemov-axios-FJ9v1tKH.js";const dt={dark:!1,colors:{background:"#F4F5FA",primary:y.indigo.base,secondary:y.indigo.base,positive:y.green.darken3,negative:y.red.darken3}},vt={dark:!0,colors:{background:"#121212",primary:y.indigo.lighten4,secondary:y.indigo.darken4,positive:y.green.lighten2,negative:y.red.lighten1}},mt={themes:{defaultTheme:"light",light:dt,dark:vt},variations:{colors:["primary","secondary","positive","negative"],lighten:0,darken:0}},U=B({__name:"DifferenceValue",props:O({value:null,strong:null,positiveClass:null,negativeClass:null,strongClass:null,tag:null},{positiveClass:["text-positive"],negativeClass:["text-negative"],strongClass:["font-weight-bold"],tag:"span"}),setup(e){const u=e.tag;function r(l){return l===0?"":l>0?`+${$(l)}`:`${$(l)}`}function _(l){return l===0?[""]:l>=e.strong?[...e.positiveClass,...e.strongClass]:l<=-e.strong?[...e.negativeClass,...e.strongClass]:l>0?[...e.positiveClass]:[...e.negativeClass]}return(l,v)=>(d(),N(m(u),{class:Q(_(l.value))},{default:n(()=>[g(p(r(l.value)),1)]),_:1},8,["class"]))}}),_t={key:0},ft=s("th",{scope:"col",class:"pl-4 pr-2"}," ",-1),pt={scope:"col",class:"px-2 text-right font-weight-bold"},ht={key:0,scope:"col",class:"px-2 text-right font-weight-bold"},gt=s("th",{scope:"col",class:"pl-2 pr-4 text-right font-weight-bold"},"24時間",-1),bt={scope:"row",class:"channel-name-head pl-4 pr-2"},yt={class:"channel-name-text"},xt={class:"px-2 text-h6"},wt={key:0},Ct={colspan:"4",class:"pa-4 text-center"},kt={key:1},$t={class:"text-right text-h6"},Dt={scope:"row",class:"pl-4 pr-2 text-right text-body-1 font-weight-bold"},Nt=s("p",null," YouTube の制約により、チャンネル登録者数の正確な数値はチャンネルの所有者のみに開示されます。 それ以外の利用者には数値の上位3桁のみが開示されます。 ",-1),Tt=s("p",null," したがって、このサイトで表示している数値は上位3桁のみの最小値であり、正確な数値はこれ以上となります。 下記の数値は合計値の参考としてお考えください。 ",-1),Vt={class:"mt-n4"},Pt=s("div",{class:"font-weight-bold text-body-2"},"最小値",-1),St={class:"mt-n4"},Ut=s("div",{class:"font-weight-bold text-body-2"},"平均値",-1),Mt={class:"mt-n4"},Bt=s("div",{class:"font-weight-bold text-body-2"},"最大値",-1),Ft={class:"px-2"},Ht=B({__name:"StatTable",props:{channels:null,type:null},setup(e){function u(){switch(e.type){case"subscriber":return"登録数";case"view":return"再生数";case"video":return"動画数"}}function r(o){switch(e.type){case"subscriber":return o.statistics.subscriberCount;case"view":return o.statistics.viewCount;case"video":return o.statistics.videoCount}}function _(o){switch(e.type){case"subscriber":return o.statistics.subscriberCountPerHour;case"view":return o.statistics.viewCountPerHour;case"video":return o.statistics.videoCountPerHour}}function l(o){switch(e.type){case"subscriber":return o.statistics.subscriberCountPerDay;case"view":return o.statistics.viewCountPerDay;case"video":return o.statistics.videoCountPerDay}}function v(){switch(e.type){case"subscriber":return 100;case"view":return 1e3;case"video":return 10}}function f(o){return o>=1e3?o+10**(BigInt(o).toString().length-3)-1:o}function T(){const o=C(e.channels,r);return Math.round(o+(C(e.channels,i=>f(r(i)))-o)/2)}return(o,i)=>{const V=a("v-img"),F=a("v-avatar"),H=a("v-list-item"),I=a("v-progress-circular"),P=a("v-btn"),D=a("v-card-text"),x=a("v-timeline-item"),A=a("v-timeline"),Y=a("v-spacer"),z=a("v-card-actions"),j=a("v-card"),E=a("v-dialog"),R=a("v-table");return d(),N(R,{density:"compact",hover:""},{default:n(()=>[e.channels.length!==0?(d(),k("thead",_t,[s("tr",null,[ft,s("th",pt,p(u()),1),e.type==="subscriber"?(d(),k("th",ht,"1時間")):h("",!0),gt])])):h("",!0),s("tbody",null,[(d(!0),k(X,null,W(e.channels,c=>(d(),k("tr",{class:"channel text-right",key:c.id},[s("th",bt,[t(H,{class:"channel-name text-left px-0",href:`https://www.youtube.com/${c.customUrl}`,ripple:!1,slim:!0},{title:n(()=>[s("span",yt,p(c.name),1)]),prepend:n(()=>[t(F,{class:"avatar",color:c.color.key,variant:"outlined",size:"small"},{default:n(()=>[t(V,{src:c.thumbnails.default.url,alt:c.fullname},null,8,["src","alt"])]),_:2},1032,["color"])]),_:2},1032,["href"])]),s("td",xt,p(m($)(r(c))),1),e.type==="subscriber"?(d(),N(U,{key:0,class:"px-2 text-h6",value:_(c),strong:v(),tag:"td"},null,8,["value","strong"])):h("",!0),t(U,{class:"pl-2 pr-4 text-h6",value:l(c),strong:v(),tag:"td"},null,8,["value","strong"])]))),128)),e.channels.length===0?(d(),k("tr",wt,[s("td",Ct,[t(I,{color:"primary",indeterminate:""})])])):h("",!0)]),e.channels.length!==0?(d(),k("tfoot",kt,[s("tr",$t,[s("th",Dt,[e.type==="subscriber"?(d(),N(E,{key:0,"max-width":"640"},{activator:n(({props:c})=>[t(P,Z(c,{icon:"mdi-information-outline",variant:"plain",density:"compact","aria-label":"チャンネル登録者数について"}),null,16)]),default:n(({isActive:c})=>[t(j,{title:"チャンネル登録者数について"},{default:n(()=>[t(D,null,{default:n(()=>[Nt,Tt]),_:1}),t(D,null,{default:n(()=>[t(A,{class:"text-center",direction:"horizontal",side:"end",size:"small",density:"compact"},{default:n(()=>[t(x,{icon:"mdi-flag-checkered","dot-color":"green"},{default:n(()=>[s("div",Vt,[s("p",null,p(m($)(m(C)(e.channels,r))),1),Pt])]),_:1}),t(x,{icon:"mdi-flag-checkered","dot-color":"orange-darken-1"},{default:n(()=>[s("div",St,[s("p",null,p(m($)(T())),1),Ut])]),_:1}),t(x,{icon:"mdi-flag-checkered","dot-color":"red"},{default:n(()=>[s("div",Mt,[s("p",null,p(m($)(m(C)(e.channels,S=>f(r(S))))),1),Bt])]),_:1})]),_:1})]),_:1}),t(z,null,{default:n(()=>[t(Y),t(P,{text:"閉じる",onClick:S=>c.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1})):h("",!0),g(" 合計 ")]),s("td",Ft,p(m($)(m(C)(e.channels,r))),1),e.type==="subscriber"?(d(),N(U,{key:0,class:"px-2",value:m(C)(e.channels,_),strong:v(),tag:"td"},null,8,["value","strong"])):h("",!0),t(U,{class:"pl-2 pr-4",value:m(C)(e.channels,l),strong:v(),tag:"td"},null,8,["value","strong"])])])):h("",!0)]),_:1})}}}),It={key:0,class:"update-time"},At=B({__name:"UpdateTime",props:{time:null},setup(e){const u=b(Number.NaN),r=b();function _(){return u.value>=60?`${Math.floor(u.value/60)}分`:`${u.value}秒`}function l(){u.value=M().diff(e.time,"s")}return G(async()=>{r.value=setInterval(l,1e3)}),J(()=>{clearInterval(r.value)}),tt(()=>e.time,l),(v,f)=>e.time.isValid()&&!Number.isNaN(u.value)?(d(),k("div",It,p(`${e.time.format("YYYY/MM/DD HH:mm:ss")} (${_()}前) 更新`),1)):h("",!0)}}),Yt=s("span",{class:"font-weight-bold"},"チャンネル登録者数",-1),zt=s("span",{class:"font-weight-bold"},"総再生数",-1),jt=s("span",{class:"font-weight-bold"},"配信・動画数",-1),Et=s("ul",null,[s("li",null,"およそ10分ごとに自動で更新されます。数値は減少することがあります"),s("li",null,"総再生数と配信・動画数は配信終了後から反映されます"),s("li",null,"このサイトは非公式のファンサイトです")],-1),Rt=B({__name:"StatsApp",setup(e){const u=b([]),r=b(M(Number.NaN)),_=b(),l=b("subscriber"),v=b(),f=b();L(q,{retries:3,retryDelay:L.exponentialDelay});async function T(){try{f.value=!1;const o=(await q.get(ct)).data,i=(await q.get(rt)).data;u.value=ut("id",o,i.data),r.value=M.unix(i.fetched_at);const V=Math.floor(6e5-(M().unix()-i.fetched_at)*1e3)+5e3;_.value=setTimeout(T,V)}catch(o){console.error(`Fetching error. Retrying in 10 minutes: ${o}`),f.value=!0,_.value=setTimeout(T,6e5)}}return G(async()=>{await T()}),J(()=>{clearInterval(_.value)}),(o,i)=>{const V=a("v-app-bar-nav-icon"),F=a("v-toolbar-title"),H=a("v-app-bar"),I=a("v-btn"),P=a("v-snackbar"),D=a("v-icon"),x=a("v-tab"),A=a("v-tabs"),Y=a("v-card"),z=a("v-col"),j=a("v-row"),E=a("v-container"),R=a("v-footer"),c=a("v-main"),S=a("v-app");return d(),N(S,null,{default:n(()=>[t(lt,{opened:v.value,"onUpdate:opened":i[0]||(i[0]=w=>v.value=w),channels:u.value},null,8,["opened","channels"]),t(c,null,{default:n(()=>[t(H,{flat:"",density:"compact"},{append:n(()=>[t(it)]),default:n(()=>[t(V,{variant:"text",onClick:i[1]||(i[1]=et(w=>v.value=!v.value,["stop"])),"aria-label":"ナビゲーションを表示"}),t(F,null,{default:n(()=>[g("けもV リアルタイム統計")]),_:1})]),_:1}),t(P,{modelValue:f.value,"onUpdate:modelValue":i[3]||(i[3]=w=>f.value=w),timeout:"10000"},{actions:n(()=>[t(I,{color:"red-lighten-2",variant:"text",onClick:i[2]||(i[2]=w=>f.value=!1)},{default:n(()=>[g("閉じる")]),_:1})]),default:n(()=>[g(" データの読み込みができませんでした。しばらくしてから再読み込みしてください。 ")]),_:1},8,["modelValue"]),t(E,null,{default:n(()=>[t(j,{justify:"center"},{default:n(()=>[t(z,{cols:"12",md:"12",lg:"10",xl:"7",xxl:"6"},{default:n(()=>[t(A,{modelValue:l.value,"onUpdate:modelValue":i[4]||(i[4]=w=>l.value=w),color:"primary","align-tabs":"center",density:"compact"},{default:n(()=>[t(x,{value:"subscriber"},{default:n(()=>[t(D,{start:""},{default:n(()=>[g("mdi-account-check")]),_:1}),Yt]),_:1}),t(x,{value:"view"},{default:n(()=>[t(D,{start:""},{default:n(()=>[g("mdi-play")]),_:1}),zt]),_:1}),t(x,{value:"video"},{default:n(()=>[t(D,{start:""},{default:n(()=>[g("mdi-video")]),_:1}),jt]),_:1})]),_:1},8,["modelValue"]),t(Ht,{channels:u.value,type:l.value},null,8,["channels","type"]),t(Y,{class:"text-right px-4 py-2",variant:"flat"},{default:n(()=>[t(At,{class:"update-time",time:r.value},null,8,["time"])]),_:1})]),_:1})]),_:1})]),_:1}),t(R,{class:"bg-secondary text-left d-flex flex-column mt-10"},{default:n(()=>[Et]),_:1})]),_:1})]),_:1})}}}),qt=st({components:at,directives:ot,icons:{defaultSet:"mdi"},theme:mt}),K=nt(Rt);K.use(qt);K.mount("#app");
