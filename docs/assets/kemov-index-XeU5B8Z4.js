import{u as I}from"./kemov-main-EqAsrzU9.js";import{d as A,j as S,k as O,r as T,o as D,c as L,w as y,h as w,O as U}from"./kemov-runtime-dom.esm-bundler-g1_GW4ns.js";import{g as v}from"./kemov-axios--MCeKlca.js";const i="vuetify-color-scheme",z=A({__name:"ThemeToggleButton",setup(e){const t=I();function s(){return window.matchMedia?window.matchMedia("(prefers-color-scheme: light)").matches?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"unspecified":"unspecified"}function a(){t.global.current.value.dark?(s()==="light"?localStorage.removeItem(i):localStorage.setItem(i,"light"),t.global.name.value="light"):(s()==="dark"?localStorage.removeItem(i):localStorage.setItem(i,"dark"),t.global.name.value="dark")}function o(n){const r=localStorage.getItem(i);r===null?t.global.name.value=n.matches?"dark":"light":(r==="dark"&&n.matches||r==="light"&&!n.matches)&&localStorage.removeItem(i)}return S(()=>{window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o);const n=localStorage.getItem(i);n==="light"?t.global.name.value="light":n==="dark"||s()==="dark"?t.global.name.value="dark":t.global.name.value="light"}),O(()=>{window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",o)}),(n,r)=>{const u=T("v-btn"),E=T("v-tooltip");return D(),L(E,{text:"テーマを切り替え"},{activator:y(({props:_})=>[w(u,U(_,{icon:"mdi-theme-light-dark",onClick:a}),null,16)]),_:1})}}});function K(e){return e==null?"":e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}const J="https://nanase.cc/asset/kemov/channels.json",Z="https://s3.ap-northeast-1.amazonaws.com/nanase.asset/kemov/stats.json",k="https://s3.ap-northeast-1.amazonaws.com/nanase.asset/kemov/stats/video/";function Q(e){return`${k}${e}.json`}const P=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);var B=e=>!P.has(e&&e.code);const F=v(B),h="axios-retry";function C(e){const t=["ERR_CANCELED","ECONNABORTED"];return e.response||!e.code||t.includes(e.code)?!1:F(e)}const p=["get","head","options"],M=p.concat(["put","delete"]);function m(e){return e.code!=="ECONNABORTED"&&(!e.response||e.response.status>=500&&e.response.status<=599)}function q(e){var t;return(t=e.config)!=null&&t.method?m(e)&&p.indexOf(e.config.method)!==-1:!1}function g(e){var t;return(t=e.config)!=null&&t.method?m(e)&&M.indexOf(e.config.method)!==-1:!1}function N(e){return C(e)||g(e)}function H(){return 0}function b(e=0,t=void 0,s=100){const a=2**e*s,o=a*.2*Math.random();return a+o}const G={retries:3,retryCondition:N,retryDelay:H,shouldResetTimeout:!1,onRetry:()=>{}};function j(e,t){return{...G,...t,...e[h]}}function f(e,t){const s=j(e,t||{});return s.retryCount=s.retryCount||0,s.lastRequestTime=s.lastRequestTime||Date.now(),e[h]=s,s}function V(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}async function Y(e,t){const{retries:s,retryCondition:a}=e,o=(e.retryCount||0)<s&&a(t);if(typeof o=="object")try{return await o!==!1}catch{return!1}return o}const l=(e,t)=>{const s=e.interceptors.request.use(o=>(f(o,t),o)),a=e.interceptors.response.use(null,async o=>{const{config:n}=o;if(!n)return Promise.reject(o);const r=f(n,t);if(await Y(r,o)){r.retryCount+=1;const{retryDelay:u,shouldResetTimeout:E,onRetry:_}=r,R=u(r.retryCount,o);if(V(e,n),!E&&n.timeout&&r.lastRequestTime){const c=Date.now()-r.lastRequestTime,d=n.timeout-c-R;if(d<=0)return Promise.reject(o);n.timeout=d}return n.transformRequest=[c=>c],await _(r.retryCount,o,n),new Promise(c=>{setTimeout(()=>c(e(n)),R)})}return Promise.reject(o)});return{requestInterceptorId:s,responseInterceptorId:a}};l.isNetworkError=C;l.isSafeRequestError=q;l.isIdempotentRequestError=g;l.isNetworkOrIdempotentRequestError=N;l.exponentialDelay=b;l.isRetryableError=m;export{z as _,l as a,J as c,Z as s,Q as v,K as w};
