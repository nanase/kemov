import{d as S,m as R,o as v,c as $,w as n,n as G,u as _,a as g,t as f,r as a,b as x,e as s,f as p,g as J,F as K,h as t,i as Q,j as W,k as X,l as k,p as Z,q as tt,s as et,v as nt}from"./kemov-runtime-dom.esm-bundler-CGaxysLU.js";import{c as h,a as st,b as at,d as ot}from"./kemov-main-BtFM7cON.js";import{w,_ as lt,a as it,c as ct,s as rt}from"./kemov-config-DJ6mwRiH.js";import{s as y,d as M,a as q,m as ut}from"./kemov-axios-BET8QU6w.js";const dt={dark:!1,colors:{background:"#F4F5FA",primary:h.indigo.base,secondary:h.indigo.base,positive:h.green.darken3,negative:h.red.darken3}},mt={dark:!0,colors:{background:"#121212",primary:h.indigo.lighten4,secondary:h.indigo.darken4,positive:h.green.lighten2,negative:h.red.lighten1}},vt={themes:{defaultTheme:"light",light:dt,dark:mt},variations:{colors:["primary","secondary","positive","negative"],lighten:0,darken:0}},P=S({__name:"DifferenceValue",props:R({value:null,strong:null,positiveClass:null,negativeClass:null,strongClass:null,tag:null},{positiveClass:["text-positive"],negativeClass:["text-negative"],strongClass:["font-weight-bold"],tag:"span"}),setup(e){const u=e.tag;function r(o){return o===0?"":o>0?`+${w(o)}`:`${w(o)}`}function c(o){return o===0?[""]:o>=e.strong?[...e.positiveClass,...e.strongClass]:o<=-e.strong?[...e.negativeClass,...e.strongClass]:o>0?[...e.positiveClass]:[...e.negativeClass]}return(o,m)=>(v(),$(_(u),{class:G(c(o.value))},{default:n(()=>[g(f(r(o.value)),1)]),_:1},8,["class"]))}}),_t={key:0},ft=s("th",{scope:"col",class:"pl-4 pr-2"}," ",-1),pt={scope:"col",class:"px-2 text-right font-weight-bold"},gt={key:0,scope:"col",class:"px-2 text-right font-weight-bold"},ht=s("th",{scope:"col",class:"pl-2 pr-4 text-right font-weight-bold"},"24時間",-1),bt={scope:"row",class:"channel-name-head pl-4 pr-2"},yt={class:"channel-name-text"},xt={class:"px-2 text-h6"},wt={key:0},Ct={colspan:"4",class:"pa-4 text-center"},kt={key:1},$t={class:"text-right text-h6"},Nt={scope:"row",class:"pl-4 pr-2 text-right text-body-1 font-weight-bold"},Vt=s("p",null," YouTube の制約により、チャンネル登録者数の正確な数値はチャンネルの所有者のみに開示されます。 それ以外の利用者には数値の上位3桁のみが開示されます。 ",-1),Tt=s("p",null," したがって、このサイトで表示している数値は上位3桁のみの最小値であり、正確な数値はこれ以上となります。 下記の数値は合計値の参考としてお考えください。 ",-1),Dt={class:"mt-n4"},Pt=s("div",{class:"font-weight-bold text-body-2"},"最小値",-1),Mt={class:"mt-n4"},St=s("div",{class:"font-weight-bold text-body-2"},"平均値",-1),Ut={class:"mt-n4"},Bt=s("div",{class:"font-weight-bold text-body-2"},"最大値",-1),Ft={class:"px-2"},Ht=S({__name:"StatTable",props:{channels:null,type:null},setup(e){function u(){switch(e.type){case"subscriber":return"登録数";case"view":return"再生数";case"video":return"動画数"}}function r(l){switch(e.type){case"subscriber":return l.statistics.subscriberCount;case"view":return l.statistics.viewCount;case"video":return l.statistics.videoCount}}function c(l){switch(e.type){case"subscriber":return l.statistics.subscriberCountPerHour;case"view":return l.statistics.viewCountPerHour;case"video":return l.statistics.videoCountPerHour}}function o(l){switch(e.type){case"subscriber":return l.statistics.subscriberCountPerDay;case"view":return l.statistics.viewCountPerDay;case"video":return l.statistics.videoCountPerDay}}function m(){switch(e.type){case"subscriber":return 100;case"view":return 1e3;case"video":return 10}}function b(l){return l>=1e3?l+10**(BigInt(l).toString().length-3)-1:l}function d(){const l=y(e.channels,r);return Math.round(l+(y(e.channels,T=>b(r(T)))-l)/2)}return(l,T)=>{const U=a("v-img"),B=a("v-avatar"),F=a("v-list-item"),N=a("v-progress-circular"),C=a("v-btn"),D=a("v-card-text"),V=a("v-timeline-item"),H=a("v-timeline"),A=a("v-spacer"),Y=a("v-card-actions"),j=a("v-card"),z=a("v-dialog"),E=a("v-table");return v(),$(E,{density:"compact",hover:""},{default:n(()=>[e.channels.length!==0?(v(),x("thead",_t,[s("tr",null,[ft,s("th",pt,f(u()),1),e.type==="subscriber"?(v(),x("th",gt,"1時間")):p("",!0),ht])])):p("",!0),s("tbody",null,[(v(!0),x(K,null,J(e.channels,i=>(v(),x("tr",{class:"channel text-right",key:i.id},[s("th",bt,[t(F,{class:"channel-name text-left px-0",href:`https://www.youtube.com/${i.customUrl}`,ripple:!1,slim:""},{title:n(()=>[s("span",yt,f(i.name),1)]),prepend:n(()=>[t(B,{class:"avatar",color:i.color.key,variant:"outlined",size:"small"},{default:n(()=>[t(U,{src:i.thumbnails.default.url,alt:i.fullname},null,8,["src","alt"])]),_:2},1032,["color"])]),_:2},1032,["href"])]),s("td",xt,f(_(w)(r(i))),1),e.type==="subscriber"?(v(),$(P,{key:0,class:"px-2 text-h6",value:c(i),strong:m(),tag:"td"},null,8,["value","strong"])):p("",!0),t(P,{class:"pl-2 pr-4 text-h6",value:o(i),strong:m(),tag:"td"},null,8,["value","strong"])]))),128)),e.channels.length===0?(v(),x("tr",wt,[s("td",Ct,[t(N,{color:"primary",indeterminate:""})])])):p("",!0)]),e.channels.length!==0?(v(),x("tfoot",kt,[s("tr",$t,[s("th",Nt,[e.type==="subscriber"?(v(),$(z,{key:0,"max-width":"640"},{activator:n(({props:i})=>[t(C,Q(i,{icon:"mdi-information-outline",variant:"plain",density:"compact","aria-label":"チャンネル登録者数について"}),null,16)]),default:n(({isActive:i})=>[t(j,{title:"チャンネル登録者数について"},{default:n(()=>[t(D,null,{default:n(()=>[Vt,Tt]),_:1}),t(D,null,{default:n(()=>[t(H,{class:"text-center",direction:"horizontal",side:"end",size:"small",density:"compact"},{default:n(()=>[t(V,{icon:"mdi-flag-checkered","dot-color":"green"},{default:n(()=>[s("div",Dt,[s("p",null,f(_(w)(_(y)(e.channels,r))),1),Pt])]),_:1}),t(V,{icon:"mdi-flag-checkered","dot-color":"orange-darken-1"},{default:n(()=>[s("div",Mt,[s("p",null,f(_(w)(d())),1),St])]),_:1}),t(V,{icon:"mdi-flag-checkered","dot-color":"red"},{default:n(()=>[s("div",Ut,[s("p",null,f(_(w)(_(y)(e.channels,I=>b(r(I))))),1),Bt])]),_:1})]),_:1})]),_:1}),t(Y,null,{default:n(()=>[t(A),t(C,{text:"閉じる",onClick:I=>i.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1})):p("",!0),g(" 合計 ")]),s("td",Ft,f(_(w)(_(y)(e.channels,r))),1),e.type==="subscriber"?(v(),$(P,{key:0,class:"px-2",value:_(y)(e.channels,c),strong:m(),tag:"td"},null,8,["value","strong"])):p("",!0),t(P,{class:"pl-2 pr-4",value:_(y)(e.channels,o),strong:m(),tag:"td"},null,8,["value","strong"])])])):p("",!0)]),_:1})}}});function L(e,u){let r,c;const o=async function(){try{c=await e(),typeof c<"u"&&(r=setTimeout(o,c*1e3))}catch(m){u&&(c=await u(m),typeof c<"u"&&(r=setTimeout(o,c*1e3)))}};W(async()=>{await o()}),X(()=>{clearInterval(r)})}const At={key:0,class:"update-time"},Yt=S({__name:"UpdateTime",props:{time:null},setup(e){const u=k(Number.NaN),r=Z(()=>u.value>=60?`${Math.floor(u.value/60)}分`:`${u.value}秒`);async function c(){return u.value=M().diff(e.time,"s"),1}return L(c),tt(()=>e.time,c),(o,m)=>e.time.isValid()&&!Number.isNaN(u.value)?(v(),x("div",At,f(`${e.time.format("YYYY/MM/DD HH:mm:ss")} (${r.value}前) 更新`),1)):p("",!0)}}),jt=s("span",{class:"font-weight-bold"},"チャンネル登録者数",-1),zt=s("span",{class:"font-weight-bold"},"総再生数",-1),Et=s("span",{class:"font-weight-bold"},"配信・動画数",-1),It=s("ul",null,[s("li",null,"およそ10分ごとに自動で更新されます。数値は減少することがあります"),s("li",null,"総再生数と配信・動画数は配信終了後から反映されます"),s("li",null,"このサイトは非公式のファンサイトです")],-1),qt=S({__name:"StatsApp",setup(e){const u=k([]),r=k(M(Number.NaN)),c=k("subscriber"),o=k(),m=k();return L(async()=>{m.value=!1;const b=(await q.get(ct)).data,d=(await q.get(rt)).data;return u.value=ut("id",b,d.data),r.value=M.unix(d.fetched_at),Math.max(Math.floor(600-(M().unix()-d.fetched_at))+5,30)},async b=>(console.error(`Fetching error. Retrying in 10 minutes: ${b}`),m.value=!0,600)),(b,d)=>{const l=a("v-app-bar-nav-icon"),T=a("v-toolbar-title"),U=a("v-app-bar"),B=a("v-btn"),F=a("v-snackbar"),N=a("v-icon"),C=a("v-tab"),D=a("v-tabs"),V=a("v-card"),H=a("v-col"),A=a("v-row"),Y=a("v-container"),j=a("v-footer"),z=a("v-main"),E=a("v-app");return v(),$(E,null,{default:n(()=>[t(lt,{opened:o.value,"onUpdate:opened":d[0]||(d[0]=i=>o.value=i),channels:u.value},null,8,["opened","channels"]),t(z,null,{default:n(()=>[t(U,{flat:"",density:"compact"},{append:n(()=>[t(it)]),default:n(()=>[t(l,{variant:"text",onClick:d[1]||(d[1]=et(i=>o.value=!o.value,["stop"])),"aria-label":"ナビゲーションを表示"}),t(T,null,{default:n(()=>[g("けもV リアルタイム統計")]),_:1})]),_:1}),t(F,{modelValue:m.value,"onUpdate:modelValue":d[3]||(d[3]=i=>m.value=i),timeout:"10000"},{actions:n(()=>[t(B,{color:"red-lighten-2",variant:"text",onClick:d[2]||(d[2]=i=>m.value=!1)},{default:n(()=>[g("閉じる")]),_:1})]),default:n(()=>[g(" データの読み込みができませんでした。しばらくしてから再読み込みしてください。 ")]),_:1},8,["modelValue"]),t(Y,null,{default:n(()=>[t(A,{justify:"center"},{default:n(()=>[t(H,{cols:"12",md:"12",lg:"10",xl:"7",xxl:"6"},{default:n(()=>[t(D,{modelValue:c.value,"onUpdate:modelValue":d[4]||(d[4]=i=>c.value=i),color:"primary","align-tabs":"center",density:"compact"},{default:n(()=>[t(C,{value:"subscriber"},{default:n(()=>[t(N,{start:""},{default:n(()=>[g("mdi-account-check")]),_:1}),jt]),_:1}),t(C,{value:"view"},{default:n(()=>[t(N,{start:""},{default:n(()=>[g("mdi-play")]),_:1}),zt]),_:1}),t(C,{value:"video"},{default:n(()=>[t(N,{start:""},{default:n(()=>[g("mdi-video")]),_:1}),Et]),_:1})]),_:1},8,["modelValue"]),t(Ht,{channels:u.value,type:c.value},null,8,["channels","type"]),t(V,{class:"text-right px-4 py-2",variant:"flat"},{default:n(()=>[t(Yt,{class:"update-time",time:r.value},null,8,["time"])]),_:1})]),_:1})]),_:1})]),_:1}),t(j,{class:"bg-secondary text-left d-flex flex-column mt-10"},{default:n(()=>[It]),_:1})]),_:1})]),_:1})}}}),Lt=st({components:at,directives:ot,icons:{defaultSet:"mdi"},theme:vt}),O=nt(qt);O.use(Lt);O.mount("#app");
