import{j as S,p as G,l as V,u as _,R as ae,x as le,O as re,K as ie,al as me,C as pe,s as ve,E as Be,k as z,U as Ce,am as Me,z as he,d as K,m as ge,b as I,f as L,ab as k,e as F,a9 as X,c as E,w as s,o as y,a as D,t as O,F as we,g as f,an as ye,ao as be,i as h,a6 as ue,r as xe,h as Ee}from"./kemov-_plugin-vue_export-helper-BfvHD29s.js";import{d as ce,f as De}from"./kemov-axios-CRW72lKU.js";function R(e){return me()?(pe(e),!0):!1}function Z(e){return typeof e=="function"?e():_(e)}const ee=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ze=Object.prototype.toString,Fe=e=>ze.call(e)==="[object Object]",ke=()=>{};function Le(e,t){function n(...a){return new Promise((o,l)=>{Promise.resolve(e(()=>t.apply(this,a),{fn:t,thisArg:this,args:a})).then(o).catch(l)})}return n}const _e=e=>e();function Ve(e=_e){const t=S(!0);function n(){t.value=!1}function a(){t.value=!0}const o=(...l)=>{t.value&&e(...l)};return{isActive:re(t),pause:n,resume:a,eventFilter:o}}function Ie(e){return ie()}function Oe(e,t,n={}){const{eventFilter:a=_e,...o}=n;return V(e,Le(a,t),o)}function Te(e,t,n={}){const{eventFilter:a,...o}=n,{eventFilter:l,pause:i,resume:r,isActive:u}=Ve(a);return{stop:Oe(e,t,{...o,eventFilter:l}),pause:i,resume:r,isActive:u}}function je(e,t=!0,n){Ie()?ae(e,n):t?e():le(e)}function Ne(e,t=1e3,n={}){const{immediate:a=!0,immediateCallback:o=!1}=n;let l=null;const i=S(!1);function r(){l&&(clearInterval(l),l=null)}function u(){i.value=!1,r()}function d(){const c=Z(t);c<=0||(i.value=!0,o&&e(),r(),l=setInterval(e,c))}if(a&&ee&&d(),G(t)||typeof t=="function"){const c=V(t,()=>{i.value&&ee&&d()});R(c)}return R(u),{isActive:i,pause:u,resume:d}}function Bt(e,t,n){let a;G(n)?a={evaluating:n}:a={};const{lazy:o=!1,evaluating:l=void 0,shallow:i=!0,onError:r=ke}=a,u=S(!o),d=i?ve(t):S(t);let c=0;return Be(async g=>{if(!u.value)return;c++;const p=c;let v=!1;l&&Promise.resolve().then(()=>{l.value=!0});try{const C=await e(B=>{g(()=>{l&&(l.value=!1),v||B()})});p===c&&(d.value=C)}catch(C){r(C)}finally{l&&p===c&&(l.value=!1),v=!0}}),o?z(()=>(u.value=!0,d.value)):d}const Y=ee?window:void 0;function Je(e){var t;const n=Z(e);return(t=n==null?void 0:n.$el)!=null?t:n}function de(...e){let t,n,a,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,a,o]=e,t=Y):[t,n,a,o]=e,!t)return ke;Array.isArray(n)||(n=[n]),Array.isArray(a)||(a=[a]);const l=[],i=()=>{l.forEach(c=>c()),l.length=0},r=(c,g,p,v)=>(c.addEventListener(g,p,v),()=>c.removeEventListener(g,p,v)),u=V(()=>[Je(t),Z(o)],([c,g])=>{if(i(),!c)return;const p=Fe(g)?{...g}:g;l.push(...n.flatMap(v=>a.map(C=>r(c,v,C,p))))},{immediate:!0,flush:"post"}),d=()=>{u(),i()};return R(d),d}function We(e,t={}){const{immediate:n=!0,fpsLimit:a=void 0,window:o=Y}=t,l=S(!1),i=a?1e3/a:null;let r=0,u=null;function d(p){if(!l.value||!o)return;r||(r=p);const v=p-r;if(i&&v<i){u=o.requestAnimationFrame(d);return}r=p,e({delta:v,timestamp:p}),u=o.requestAnimationFrame(d)}function c(){!l.value&&o&&(l.value=!0,r=0,u=o.requestAnimationFrame(d))}function g(){l.value=!1,u!=null&&o&&(o.cancelAnimationFrame(u),u=null)}return n&&c(),R(g),{isActive:re(l),pause:g,resume:c}}const H=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},P="__vueuse_ssr_handlers__",qe=Ue();function Ue(){return P in H||(H[P]=H[P]||{}),H[P]}function He(e,t){return qe[e]||t}function Pe(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Re={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},fe="vueuse-storage";function Ct(e,t,n,a={}){var o;const{flush:l="pre",deep:i=!0,listenToStorageChanges:r=!0,writeDefaults:u=!0,mergeDefaults:d=!1,shallow:c,window:g=Y,eventFilter:p,onError:v=m=>{console.error(m)},initOnMounted:C}=a,B=(c?ve:S)(t);if(!n)try{n=He("getDefaultStorage",()=>{var m;return(m=Y)==null?void 0:m.localStorage})()}catch(m){v(m)}if(!n)return B;const M=Z(t),A=Pe(M),w=(o=a.serializer)!=null?o:Re[A],{pause:Q,resume:W}=Te(B,()=>q(B.value),{flush:l,deep:i,eventFilter:p});g&&r&&je(()=>{n instanceof Storage?de(g,"storage",U):de(g,fe,$e),C&&U()}),C||U();function $(m,b){if(g){const x={key:e,oldValue:m,newValue:b,storageArea:n};g.dispatchEvent(n instanceof Storage?new StorageEvent("storage",x):new CustomEvent(fe,{detail:x}))}}function q(m){try{const b=n.getItem(e);if(m==null)$(b,null),n.removeItem(e);else{const x=w.write(m);b!==x&&(n.setItem(e,x),$(b,x))}}catch(b){v(b)}}function se(m){const b=m?m.newValue:n.getItem(e);if(b==null)return u&&M!=null&&n.setItem(e,w.write(M)),M;if(!m&&d){const x=w.read(b);return typeof d=="function"?d(x,M):A==="object"&&!Array.isArray(x)?{...M,...x}:x}else return typeof b!="string"?b:w.read(b)}function U(m){if(!(m&&m.storageArea!==n)){if(m&&m.key==null){B.value=M;return}if(!(m&&m.key!==e)){Q();try{(m==null?void 0:m.newValue)!==w.write(B.value)&&(B.value=se(m))}catch(b){v(b)}finally{m?le(W):W()}}}}function $e(m){U(m.detail)}return B}function Mt(e={}){const{controls:t=!1,interval:n="requestAnimationFrame"}=e,a=S(new Date),o=()=>a.value=new Date,l=n==="requestAnimationFrame"?We(o,{immediate:!0}):Ne(o,n,{immediate:!0});return t?{now:a,...l}:a}function xt(e){return e==null?"":e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}const Et="https://nanase.cc/asset/kemov/channels.json",Dt="https://d1zvseiqyto6c5.cloudfront.net/kemov/live.json",zt="https://d1zvseiqyto6c5.cloudfront.net/kemov/stats.json",Ye="https://d1zvseiqyto6c5.cloudfront.net/kemov/stats/video/";function Ft(e){return`${Ye}${e}.json`}function te(e){return me()?(pe(e),!0):!1}function j(e){return typeof e=="function"?e():_(e)}const ne=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ge=e=>e!=null,Ke=()=>{};function Ze(...e){if(e.length!==1)return Ce(...e);const t=e[0];return typeof t=="function"?re(Me(()=>({get:t,set:Ke}))):S(t)}function Qe(e,t=1e3,n={}){const{immediate:a=!0,immediateCallback:o=!1}=n;let l=null;const i=S(!1);function r(){l&&(clearInterval(l),l=null)}function u(){i.value=!1,r()}function d(){const c=j(t);c<=0||(i.value=!0,o&&e(),r(),l=setInterval(e,c))}if(a&&ne&&d(),G(t)||typeof t=="function"){const c=V(t,()=>{i.value&&ne&&d()});te(c)}return te(u),{isActive:i,pause:u,resume:d}}const Xe=ne?window:void 0;function et(e){var t;const n=j(e);return(t=n==null?void 0:n.$el)!=null?t:n}function tt(){const e=S(!1),t=ie();return t&&ae(()=>{e.value=!0},t),e}function nt(e){const t=tt();return z(()=>(t.value,!!e()))}function ot(e,t,n={}){const{window:a=Xe,...o}=n;let l;const i=nt(()=>a&&"MutationObserver"in a),r=()=>{l&&(l.disconnect(),l=void 0)},u=z(()=>{const p=j(e),v=(Array.isArray(p)?p:[p]).map(et).filter(Ge);return new Set(v)}),d=V(()=>u.value,p=>{r(),i.value&&p.size&&(l=new MutationObserver(t),p.forEach(v=>l.observe(v,o)))},{immediate:!0,flush:"post"}),c=()=>l==null?void 0:l.takeRecords(),g=()=>{d(),r()};return te(g),{isSupported:i,stop:g,takeRecords:c}}function at(e,t,n,a){const o=Qe(e,n,a);return V(()=>j(t),()=>j(t)?o.pause():o.resume(),{immediate:!0}),o}function lt(e,t){const n=e?Ze(e):S(window.pageId),a=z(()=>j(t).find(l=>l.pages.some(i=>i.id===n.value))),o=z(()=>{var l;return(l=a.value)==null?void 0:l.pages.find(i=>i.id===n.value)});return{pageId:n,section:a,page:o}}function J(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(J.cache.has(e))return J.cache.get(e);const t=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return J.cache.set(e,t),t}J.cache=new Map;function Se(e,t){const n=ie();if(!n)throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);return n}function rt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const t=Se(e).type;return J((t==null?void 0:t.aliasName)||(t==null?void 0:t.name))}const it=Symbol.for("vuetify:theme");function st(){Se("useTheme");const e=he(it,null);if(!e)throw new Error("Could not find Vuetify theme injection");return e}const N="vuetify-color-scheme";function ut(){return st()}function T(e,t){t==="unspecified"?(e.global.name.value="",document.querySelectorAll(".color-responsive").forEach(n=>{var a;if(n.classList.remove("color-responsive-dark","color-responsive-light"),n instanceof HTMLObjectElement){const o=(a=n.contentDocument)==null?void 0:a.documentElement;o&&o.classList.remove("color-responsive-dark","color-responsive-light")}})):(e.global.name.value=t,document.querySelectorAll(".color-responsive").forEach(n=>{var a;if(t==="light"?(n.classList.add("color-responsive-light"),n.classList.remove("color-responsive-dark")):(n.classList.add("color-responsive-dark"),n.classList.remove("color-responsive-light")),n instanceof HTMLObjectElement){const o=(a=n.contentDocument)==null?void 0:a.documentElement;if(!o)return;t==="light"?(o.classList.add("color-responsive-light"),o.classList.remove("color-responsive-dark")):(o.classList.add("color-responsive-dark"),o.classList.remove("color-responsive-light"))}}))}function oe(){var e,t;return(e=window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: light)").matches?"light":(t=window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches?"dark":"unspecified"}function ct(e){e.global.current.value.dark?(oe()==="light"?localStorage.removeItem(N):localStorage.setItem(N,"light"),T(e,"light")):(oe()==="dark"?localStorage.removeItem(N):localStorage.setItem(N,"dark"),T(e,"dark"))}function dt(e){const t=localStorage.getItem(N);t==="light"?T(e,"light"):t==="dark"||oe()==="dark"?T(e,"dark"):T(e,"light")}function ft(e={}){const t=ut(),n=z({get:()=>t.global.current.value.dark,set:l=>T(t,l?"dark":"light")});function a(){dt(t)}function o(){ct(t)}return e.immediate!==!1&&a(),{theme:t,reapply:a,toggle:o,isDark:n}}const mt=Symbol.for("vuetify:display");function pt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rt();const n=he(mt);if(!n)throw new Error("Could not find Vuetify display injection");const a=z(()=>{if(e.mobile!=null)return e.mobile;if(!e.mobileBreakpoint)return n.mobile.value;const l=typeof e.mobileBreakpoint=="number"?e.mobileBreakpoint:n.thresholds.value[e.mobileBreakpoint];return n.width.value<l}),o=z(()=>t?{[`${t}--mobile`]:a.value}:{});return{...n,displayClasses:o,mobile:a}}const vt={class:"animated-clock"},ht={key:0,class:"date"},gt={key:0,class:"timezone"},wt={key:1,class:"time"};ge({time:null,updateInterval:null,stop:{type:Boolean},stopAnimation:{type:Boolean},hideDate:{type:Boolean},hideTime:{type:Boolean},hideTimezone:{type:Boolean},hideSeconds:{type:Boolean}},{time:ce(),updateInterval:200});const Ae=(e,t)=>{const n=e.__vccOpts||e;for(const[a,o]of t)n[a]=o;return n},yt={};function bt(e,t){const n=h("v-icon");return y(),E(n,{class:"shaking-icon"})}const kt=Ae(yt,[["render",bt]]),_t=K({__name:"AppBaseV2",props:ye({pageId:null,pageSections:null,title:null,icon:null},{errorSnackbarShown:{type:Boolean},errorSnackbarShownModifiers:{}}),emits:["update:errorSnackbarShown"],setup(e){const t=be(e,"errorSnackbarShown"),{smAndDown:n,mdAndDown:a}=pt(),{page:o}=lt(e.pageId,e.pageSections),l=S();return(i,r)=>{const u=h("v-list"),d=h("v-navigation-drawer"),c=h("v-col"),g=h("v-row"),p=h("v-icon"),v=h("v-btn"),C=h("v-snackbar"),B=h("v-app-bar-nav-icon"),M=h("v-toolbar-title"),A=h("v-app-bar"),w=h("v-container"),Q=h("v-main"),W=h("v-app");return y(),E(W,null,{default:s(()=>[i.$slots.drawerMenu?(y(),E(d,{key:0,modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=$=>l.value=$),floating:"","aria-label":"ナビゲーション",width:270,color:"v2DrawerBackground"},{default:s(()=>[f(u,{class:"px-0 pb-0 d-flex flex-column fill-height",role:"menu"},{default:s(()=>[k(i.$slots,"drawerMenu",{currentPage:_(o)},void 0,!0)]),_:3})]),_:3},8,["modelValue"])):L("",!0),f(C,{class:"error-snackbar",modelValue:t.value,"onUpdate:modelValue":r[2]||(r[2]=$=>t.value=$),timeout:"10000",color:"v2SnackbarBackground"},{actions:s(()=>[f(v,{color:"red-lighten-2",variant:"plain",onClick:r[1]||(r[1]=$=>t.value=!1)},{default:s(()=>[f(p,null,{default:s(()=>r[6]||(r[6]=[D("mdi-close")])),_:1})]),_:1})]),default:s(()=>[k(i.$slots,"errorSnackbar",{},()=>[f(g,null,{default:s(()=>[f(c,{cols:"1"},{default:s(()=>[f(kt,{icon:"mdi-alert",size:"medium",color:"warning"})]),_:1}),f(c,null,{default:s(()=>r[5]||(r[5]=[D("データを取得できませんでした。"),F("br",null,null,-1),D("しばらくしてから再読み込みしてください。")])),_:1})]),_:1})],!0)]),_:3},8,["modelValue"]),f(Q,null,{default:s(()=>[f(A,{class:"app-bar",flat:"",floating:"",color:"v2AppBarBackground",density:_(n)?"compact":"comfortable","scroll-behavior":_(a)?"hide":void 0,"scroll-threshold":48},{append:s(()=>[k(i.$slots,"appbarAppend",{},void 0,!0)]),default:s(()=>[k(i.$slots,"appbarPrepend",{},()=>{var $,q;return[!l.value&&(e.icon??(($=_(o))==null?void 0:$.icon))?(y(),E(B,{key:0,transition:"slide-x-transition",class:"mr-n3",variant:"plain",icon:e.icon??((q=_(o))==null?void 0:q.icon),ripple:!1,onClick:r[3]||(r[3]=ue(se=>l.value=!l.value,["stop"])),"aria-label":"ナビゲーションを表示"},null,8,["icon"])):L("",!0)]},!0),l.value?L("",!0):(y(),E(M,{key:0,transition:"slide-x-transition",class:"ml-5"},{default:s(()=>{var $;return[D(O(e.title??(($=_(o))==null?void 0:$.title)),1)]}),_:1}))]),_:3},8,["density","scroll-behavior"]),_(a)?(y(),E(A,{key:0,transition:"slide-y-transition",class:"app-bar-sub",flat:"",floating:"",color:"v2AppBarBackground",density:"compact",height:"48"},{default:s(()=>[f(v,{variant:"plain",density:"compact",onClick:r[4]||(r[4]=ue($=>l.value=!l.value,["stop"])),"aria-label":"ナビゲーションを表示",ripple:!1},{default:s(()=>[f(p,{size:"small"},{default:s(()=>r[7]||(r[7]=[D("mdi-menu")])),_:1}),r[8]||(r[8]=F("div",{class:"ml-3 text-subtitle-2 opacity-90"},"Menu",-1))]),_:1})]),_:1})):L("",!0),k(i.$slots,"header",{},void 0,!0),f(w,{class:"pb-16 mb-16"},{default:s(()=>[k(i.$slots,"default",{},void 0,!0)]),_:3}),k(i.$slots,"footer",{},void 0,!0)]),_:3}),k(i.$slots,"mainAppend",{},void 0,!0)]),_:3})}}}),St=Ae(_t,[["__scopeId","data-v-43a54272"]]);ge({tag:null,node:{type:Boolean},block:{type:Boolean},overlook:{type:Boolean}},{tag:"span"});const Lt=K({__name:"StatsAppBase",props:ye({channels:null,pageId:null},{errorSnackbarShown:{type:Boolean},errorSnackbarShownModifiers:{}}),emits:["update:errorSnackbarShown"],setup(e){const t=be(e,"errorSnackbarShown"),{isDark:n,toggle:a}=ft();return(o,l)=>{const i=h("v-icon"),r=h("v-list-item-title"),u=h("v-list-item"),d=h("v-divider"),c=h("v-img"),g=h("v-avatar"),p=h("v-progress-circular"),v=h("v-list"),C=h("v-btn"),B=h("v-switch"),M=h("v-menu");return y(),E(_(St),{"page-sections":[],"error-snackbar-shown":t.value,"onUpdate:errorSnackbarShown":l[1]||(l[1]=A=>t.value=A)},{drawerMenu:s(()=>[f(u,{class:"py-2",link:"",slim:"",title:"",href:"/kemov/stats/",role:"menuitem",density:"default","base-color":"v2DrawerList"},{prepend:s(()=>[f(i,{icon:"mdi-finance",size:"large"})]),default:s(()=>[f(r,{style:{"font-size":"100%"},class:"font-weight-bold"},{default:s(()=>l[2]||(l[2]=[D("けもV リアルタイム統計")])),_:1})]),_:1}),f(d,{class:"mx-4"}),f(v,{class:"flex-grow-1 flex-shrink-1 overflow-auto",role:"menu",density:"compact",nav:"",link:""},{default:s(()=>{var A;return[(y(!0),I(we,null,xe(e.channels,w=>(y(),E(u,{key:w.id,title:w.name,subtitle:w.globalname,href:`/kemov/stats/detail/#/${w.id}`,role:"menuitem",link:"",color:"v2DrawerListActive","base-color":"v2DrawerList",style:{"font-size":"0.9rem"},active:e.pageId===`stats/detail/${w.id}`},{prepend:s(()=>[f(g,{color:w.color.key,variant:"outlined",size:"small"},{default:s(()=>[f(c,{src:w.thumbnails.default.url,alt:w.fullname},null,8,["src","alt"])]),_:2},1032,["color"])]),_:2},1032,["title","subtitle","href","active"]))),128)),((A=e.channels)==null?void 0:A.length)===0?(y(),E(u,{key:0,class:"pa-4 text-center"},{default:s(()=>[f(p,{color:"primary",indeterminate:""})]),_:1})):L("",!0)]}),_:1}),f(d),f(v,{density:"compact",link:"",nav:"",slim:"",class:"flex-grow-0 flex-shrink-0",role:"menu"},{default:s(()=>[f(u,{title:"ジェネット楽曲一覧",href:"/kemov/genet/music/",role:"menuitem"},{prepend:s(()=>[f(i,{icon:"mdi-music",size:"small"})]),_:1})]),_:1})]),appbarAppend:s(()=>[f(M,{"close-on-content-click":!1},{activator:s(({props:A})=>[f(C,Ee({icon:""},A,{variant:"plain","aria-label":"ページオプションを表示"}),{default:s(()=>[f(i,null,{default:s(()=>l[3]||(l[3]=[D("mdi-dots-horizontal")])),_:1})]),_:2},1040)]),default:s(()=>[f(v,{slim:"",density:"compact"},{default:s(()=>[f(u,{onClick:_(a)},{default:s(()=>[f(B,{"hide-details":"",flat:"",ripple:!1,"model-value":_(n),"onUpdate:modelValue":l[0]||(l[0]=A=>G(n)?n.value=A:null),"aria-label":"テーマを切り替え","true-icon":"mdi-weather-night","false-icon":"mdi-white-balance-sunny"},{prepend:s(()=>l[4]||(l[4]=[D("テーマを切り替え")])),_:1},8,["model-value"])]),_:1},8,["onClick"])]),_:1})]),_:1})]),header:s(()=>[k(o.$slots,"header")]),footer:s(()=>[k(o.$slots,"footer")]),default:s(()=>[k(o.$slots,"default")]),_:3},8,["error-snackbar-shown"])}}});export{Lt as _,Ne as a,Ct as b,Et as c,Bt as d,Dt as l,zt as s,xt as t,Mt as u,Ft as v};
