import{d as D,m as et,o as _,c as k,w as e,n as at,u as p,a as y,t as b,r as s,b as l,e as $,f as z,F as I,g as t,h as g,i as S,j as A,k as st,l as nt,p as lt,q as ot}from"./kemov-runtime-dom.esm-bundler-owt1npQP.js";import{u as rt,c as it,a as ct,d as ut,b as w}from"./kemov-main-UxwpoVyX.js";import{w as V,a as M,c as dt,s as mt}from"./kemov-index-P5RyAsfu.js";import{s as F,d as C,a as H,m as vt}from"./kemov-axios--MCeKlca.js";const x=D({__name:"DifferenceValue",props:et({value:null,strong:null,positiveClass:null,negativeClass:null,strongClass:null,tag:null},{positiveClass:["text-green-darken-3"],negativeClass:["text-red-darken-3"],strongClass:["font-weight-bold"],tag:"span"}),setup(a){const i=a.tag;function u(n){return n===0?"":n>0?`+${V(n)}`:`${V(n)}`}function d(n){return n===0?[""]:n>=a.strong?[...a.positiveClass,...a.strongClass]:n<=-a.strong?[...a.negativeClass,...a.strongClass]:n>0?[...a.positiveClass]:[...a.negativeClass]}return(n,m)=>(_(),k(p(i),{class:at(d(n.value))},{default:e(()=>[y(b(u(n.value)),1)]),_:1},8,["class"]))}}),ft=l("th",null," ",-1),_t={class:"text-right font-weight-bold"},gt=l("th",{class:"text-right font-weight-bold"},"1時間",-1),pt=l("th",{class:"text-right font-weight-bold"},"24時間",-1),bt={class:"channel-name-text"},ht={class:"text-h6"},yt={class:"text-right text-h6"},wt=l("td",{class:"text-body-1 font-weight-bold"},"合計",-1),xt=D({__name:"StatTable",props:{channels:null,type:null},setup(a){function i(){switch(a.type){case"subscriber":return"チャンネル登録";case"view":return"再生回数";case"video":return"動画数"}}function u(o){switch(a.type){case"subscriber":return o.statistics.subscriberCount;case"view":return o.statistics.viewCount;case"video":return o.statistics.videoCount}}function d(o){switch(a.type){case"subscriber":return o.statistics.subscriberCountPerHour;case"view":return o.statistics.viewCountPerHour;case"video":return o.statistics.videoCountPerHour}}function n(o){switch(a.type){case"subscriber":return o.statistics.subscriberCountPerDay;case"view":return o.statistics.viewCountPerDay;case"video":return o.statistics.videoCountPerDay}}function m(){switch(a.type){case"subscriber":return 100;case"view":return 1e3;case"video":return 10}}return(o,T)=>{const h=s("v-img"),N=s("v-avatar"),f=s("v-list-item"),v=s("v-table");return _(),k(v,{density:"compact",hover:""},{default:e(()=>[l("thead",null,[l("tr",null,[ft,l("th",_t,b(i()),1),gt,pt])]),l("tbody",null,[(_(!0),$(I,null,z(a.channels,r=>(_(),$("tr",{class:"channel text-right",key:r.id},[l("td",null,[t(f,{class:"channel-name text-left px-0",href:`https://www.youtube.com/${r.customUrl}`,ripple:!1,slim:!0},{title:e(()=>[l("span",bt,b(r.name),1)]),prepend:e(()=>[t(N,{class:"avatar",color:r.color.key,variant:"outlined",size:"small"},{default:e(()=>[t(h,{src:r.thumbnails.default.url},null,8,["src"])]),_:2},1032,["color"])]),_:2},1032,["href"])]),l("td",ht,b(p(V)(u(r))),1),t(x,{class:"text-h6",value:d(r),strong:m(),tag:"td"},null,8,["value","strong"]),t(x,{class:"text-h6",value:n(r),strong:m(),tag:"td"},null,8,["value","strong"])]))),128))]),l("tfoot",null,[l("tr",yt,[wt,l("td",null,b(p(V)(p(F)(a.channels,u))),1),t(x,{value:p(F)(a.channels,d),strong:m(),tag:"td"},null,8,["value","strong"]),t(x,{value:p(F)(a.channels,n),strong:m(),tag:"td"},null,8,["value","strong"])])])]),_:1})}}}),Ct={key:0,class:"update-time"},kt=D({__name:"UpdateTime",props:{time:null},setup(a){const i=g(Number.NaN),u=g();function d(){return i.value>=60?`${Math.floor(i.value/60)}分`:`${i.value}秒`}function n(){i.value=C().diff(a.time,"s")}return S(async()=>{u.value=setInterval(n,1e3)}),A(()=>{clearInterval(u.value)}),st(()=>a.time,n),(m,o)=>a.time.isValid()&&!Number.isNaN(i.value)?(_(),$("div",Ct,b(`${a.time.format("YYYY/MM/DD HH:mm:ss")} (${d()}前) 更新`),1)):nt("",!0)}}),$t=l("span",{class:"font-weight-bold"},"チャンネル登録数",-1),Vt=l("span",{class:"font-weight-bold"},"再生回数",-1),Dt=l("span",{class:"font-weight-bold"},"動画数",-1),Tt=l("ul",null,[l("li",null,"およそ10分ごとに自動で更新されます。数値は減少することがあります"),l("li",null,"総再生回数と動画数は配信終了後から反映されます"),l("li",null,"このサイトは非公式です。内容についてのお問い合わせはご遠慮ください")],-1),Nt=D({__name:"StatsApp",setup(a){const i=g([]),u=g(C(Number.NaN)),d=g(),n=rt(),m=g("subscriber"),o=g();let T;M(H,{retries:3,retryDelay:M.exponentialDelay});async function h(){try{const f=(await H.get(mt)).data;i.value=vt("id",T,f.data),u.value=C.unix(f.fetched_at);const v=Math.floor(6e5-(C().unix()-f.fetched_at)*1e3)+5e3;d.value=setTimeout(h,v)}catch(f){console.error(`Fetching error. Retrying in 10 minutes: ${f}`),d.value=setTimeout(h,6e5)}}S(async()=>{T=(await H.get(dt)).data,await h()}),A(()=>{clearInterval(d.value)});function N(){n.global.name.value=n.global.current.value.dark?"light":"dark"}return(f,v)=>{const r=s("v-icon"),P=s("v-list-item"),E=s("v-img"),j=s("v-avatar"),U=s("v-list"),R=s("v-divider"),q=s("v-navigation-drawer"),L=s("v-app-bar-nav-icon"),G=s("v-toolbar-title"),J=s("v-btn"),K=s("v-app-bar"),B=s("v-tab"),O=s("v-tabs"),Q=s("v-card"),W=s("v-container"),X=s("v-footer"),Z=s("v-main"),tt=s("v-app");return _(),k(tt,null,{default:e(()=>[t(q,{class:"bg-background",modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=c=>o.value=c),floating:""},{default:e(()=>[t(U,{class:"pb-0 d-flex flex-column fill-height"},{default:e(()=>[t(P,{link:"",title:"リアルタイム統計",href:"/kemov/stats/"},{prepend:e(()=>[t(r,{icon:"mdi-finance",size:"large"})]),_:1}),t(U,{nav:"",link:"","active-class":"bg-primary",density:"compact",class:"flex-grow-1 flex-shrink-1 overflow-auto"},{default:e(()=>[(_(!0),$(I,null,z(i.value,c=>(_(),k(P,{key:c.id,title:c.name,subtitle:c.globalname,href:`./detail/#/${c.id}`},{prepend:e(()=>[t(j,{color:c.color.key,variant:"outlined",size:"small"},{default:e(()=>[t(E,{src:c.thumbnails.default.url},null,8,["src"])]),_:2},1032,["color"])]),_:2},1032,["title","subtitle","href"]))),128))]),_:1}),t(R),t(U,{density:"compact",link:"",nav:"",class:"flex-grow-0 flex-shrink-0"},{default:e(()=>[t(P,{title:"ジェネット楽曲一覧",href:"/kemov/genet/music/","prepend-icon":"mdi-music"},{prepend:e(()=>[t(r,{icon:"mdi-music",size:"small"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Z,null,{default:e(()=>[t(K,{flat:"",density:"compact"},{append:e(()=>[t(J,{icon:"mdi-theme-light-dark",onClick:N})]),default:e(()=>[t(L,{variant:"text",onClick:v[1]||(v[1]=lt(c=>o.value=!o.value,["stop"]))}),t(G,null,{default:e(()=>[y("けもV リアルタイム統計")]),_:1})]),_:1}),t(W,null,{default:e(()=>[t(O,{modelValue:m.value,"onUpdate:modelValue":v[2]||(v[2]=c=>m.value=c),color:"primary","align-tabs":"center",density:"compact"},{default:e(()=>[t(B,{value:"subscriber"},{default:e(()=>[t(r,{start:""},{default:e(()=>[y("mdi-account-check")]),_:1}),$t]),_:1}),t(B,{value:"view"},{default:e(()=>[t(r,{start:""},{default:e(()=>[y("mdi-play")]),_:1}),Vt]),_:1}),t(B,{value:"video"},{default:e(()=>[t(r,{start:""},{default:e(()=>[y("mdi-video")]),_:1}),Dt]),_:1})]),_:1},8,["modelValue"]),t(xt,{channels:i.value,type:m.value},null,8,["channels","type"]),t(Q,{class:"text-right px-4 py-2",variant:"flat"},{default:e(()=>[t(kt,{class:"update-time",time:u.value},null,8,["time"])]),_:1})]),_:1}),t(X,{class:"bg-primary text-left d-flex flex-column mt-10"},{default:e(()=>[Tt]),_:1})]),_:1})]),_:1})}}}),Pt=it({components:ct,directives:ut,icons:{defaultSet:"mdi"},theme:{themes:{defaultTheme:"light",light:{dark:!1,colors:{background:"#F4F5FA",primary:w.indigo.base,secondary:w.blue.base}},dark:{dark:!0,colors:{background:"#121212",primary:w.indigo.base,secondary:w.blue.base}}},variations:{colors:["primary","secondary"],lighten:0,darken:0}}}),Y=ot(Nt);Y.use(Pt);Y.mount("#app");
