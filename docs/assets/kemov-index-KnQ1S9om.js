import{g as D}from"./kemov-axios-PefFTsOG.js";function g(t){return t==null?"":t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}const I=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);var L=t=>!I.has(t&&t.code);const m=D(L),C="axios-retry";function c(t){const e=["ERR_CANCELED","ECONNABORTED"];return t.response||!t.code||e.includes(t.code)?!1:m(t)}const l=["get","head","options"],y=l.concat(["put","delete"]);function R(t){return t.code!=="ECONNABORTED"&&(!t.response||t.response.status>=500&&t.response.status<=599)}function S(t){var e;return(e=t.config)!=null&&e.method?R(t)&&l.indexOf(t.config.method)!==-1:!1}function N(t){var e;return(e=t.config)!=null&&e.method?R(t)&&y.indexOf(t.config.method)!==-1:!1}function A(t){return c(t)||N(t)}function p(){return 0}function U(t=0,e=void 0,r=100){const o=2**t*r,n=o*.2*Math.random();return o+n}const P={retries:3,retryCondition:A,retryDelay:p,shouldResetTimeout:!1,onRetry:()=>{}};function h(t,e){return{...P,...e,...t[C]}}function a(t,e){const r=h(t,e||{});return r.retryCount=r.retryCount||0,r.lastRequestTime=r.lastRequestTime||Date.now(),t[C]=r,r}function F(t,e){t.defaults.agent===e.agent&&delete e.agent,t.defaults.httpAgent===e.httpAgent&&delete e.httpAgent,t.defaults.httpsAgent===e.httpsAgent&&delete e.httpsAgent}async function q(t,e){const{retries:r,retryCondition:o}=t,n=(t.retryCount||0)<r&&o(e);if(typeof n=="object")try{return await n!==!1}catch{return!1}return n}const _=(t,e)=>{const r=t.interceptors.request.use(n=>(a(n,e),n)),o=t.interceptors.response.use(null,async n=>{const{config:s}=n;if(!s)return Promise.reject(n);const E=a(s,e);if(await q(E,n)){E.retryCount+=1;const{retryDelay:f,shouldResetTimeout:O,onRetry:d}=E,i=f(E.retryCount,n);if(F(t,s),!O&&s.timeout&&E.lastRequestTime){const u=Date.now()-E.lastRequestTime,T=s.timeout-u-i;if(T<=0)return Promise.reject(n);s.timeout=T}return s.transformRequest=[u=>u],await d(E.retryCount,n,s),new Promise(u=>{setTimeout(()=>u(t(s)),i)})}return Promise.reject(n)});return{requestInterceptorId:r,responseInterceptorId:o}};_.isNetworkError=c;_.isSafeRequestError=S;_.isIdempotentRequestError=N;_.isNetworkOrIdempotentRequestError=A;_.exponentialDelay=U;_.isRetryableError=R;export{_ as a,g as w};
