import{d as V,m as R,o as m,c as w,w as n,n as G,u as f,a as k,t as _,r as i,b as y,e as s,f as g,g as J,F as K,h as e,i as Q,j as W,k as X,l as C,p as Z,q as tt,s as et,v as st}from"./kemov-runtime-dom.esm-bundler-BPh9kDu6.js";import{c as p,a as nt,b as at,d as ot}from"./kemov-main-2-pK6F85.js";import{w as x,_ as it,c as lt,s as ct}from"./kemov-config-8Yiu-Jh_.js";import{s as b,d as D,a as A,m as rt}from"./kemov-axios-N4Rts__0.js";const ut={dark:!1,colors:{background:"#F4F5FA",primary:p.indigo.base,secondary:p.indigo.base,positive:p.green.darken3,negative:p.red.darken3}},dt={dark:!0,colors:{background:"#121212",primary:p.indigo.lighten4,secondary:p.indigo.darken4,positive:p.green.lighten2,negative:p.red.lighten1}},mt={themes:{defaultTheme:"light",light:ut,dark:dt},variations:{colors:["primary","secondary","positive","negative"],lighten:0,darken:0}},T=V({__name:"DifferenceValue",props:R({value:null,strong:null,positiveClass:null,negativeClass:null,strongClass:null,tag:null},{positiveClass:["text-positive"],negativeClass:["text-negative"],strongClass:["font-weight-bold"],tag:"span"}),setup(t){const r=t.tag;function l(a){return a===0?"":a>0?`+${x(a)}`:`${x(a)}`}function c(a){return a===0?[""]:a>=t.strong?[...t.positiveClass,...t.strongClass]:a<=-t.strong?[...t.negativeClass,...t.strongClass]:a>0?[...t.positiveClass]:[...t.negativeClass]}return(a,u)=>(m(),w(f(r),{class:G(c(a.value))},{default:n(()=>[k(_(l(a.value)),1)]),_:1},8,["class"]))}}),vt={key:0},ft=s("th",{scope:"col",class:"pl-4 pr-2"}," ",-1),_t={scope:"col",class:"px-2 text-right font-weight-bold"},ht={key:0,scope:"col",class:"px-2 text-right font-weight-bold"},gt=s("th",{scope:"col",class:"pl-2 pr-4 text-right font-weight-bold"},"24時間",-1),pt={scope:"row",class:"channel-name-head pl-4 pr-2"},bt={class:"channel-name-text"},yt={class:"px-2 text-h6"},xt={key:0},wt={colspan:"4",class:"pa-4 text-center"},Ct={key:1},kt={class:"text-right text-h6"},$t={scope:"row",class:"pl-4 pr-2 text-right text-body-1 font-weight-bold"},Nt=s("p",null," YouTube の制約により、チャンネル登録者数の正確な数値はチャンネルの所有者のみに開示されます。 それ以外の利用者には数値の上位3桁のみが開示されます。 ",-1),Tt=s("p",null," したがって、このサイトで表示している数値は上位3桁のみの最小値であり、正確な数値はこれ以上となります。 下記の数値は合計値の参考としてお考えください。 ",-1),Dt={class:"mt-n4"},Vt=s("div",{class:"font-weight-bold text-body-2"},"最小値",-1),Pt={class:"mt-n4"},St=s("div",{class:"font-weight-bold text-body-2"},"平均値",-1),Bt={class:"mt-n4"},Mt=s("div",{class:"font-weight-bold text-body-2"},"最大値",-1),Ft={class:"px-2"},Ht=V({__name:"StatTable",props:{channels:null,type:null},setup(t){function r(){switch(t.type){case"subscriber":return"登録数";case"view":return"再生数";case"video":return"動画数"}}function l(o){switch(t.type){case"subscriber":return o.statistics.subscriberCount;case"view":return o.statistics.viewCount;case"video":return o.statistics.videoCount}}function c(o){switch(t.type){case"subscriber":return o.statistics.subscriberCountPerHour;case"view":return o.statistics.viewCountPerHour;case"video":return o.statistics.videoCountPerHour}}function a(o){switch(t.type){case"subscriber":return o.statistics.subscriberCountPerDay;case"view":return o.statistics.viewCountPerDay;case"video":return o.statistics.videoCountPerDay}}function u(){switch(t.type){case"subscriber":return 100;case"view":return 1e3;case"video":return 10}}function v(o){return o>=1e3?o+10**(BigInt(o).toString().length-3)-1:o}function h(){const o=b(t.channels,l);return Math.round(o+(b(t.channels,$=>v(l($)))-o)/2)}return(o,$)=>{const P=i("v-img"),S=i("v-avatar"),B=i("v-list-item"),M=i("v-progress-circular"),N=i("v-btn"),H=i("v-card-text"),F=i("v-timeline-item"),z=i("v-timeline"),E=i("v-spacer"),I=i("v-card-actions"),q=i("v-card"),L=i("v-dialog"),O=i("v-table");return m(),w(O,{density:"compact",hover:""},{default:n(()=>[t.channels.length!==0?(m(),y("thead",vt,[s("tr",null,[ft,s("th",_t,_(r()),1),t.type==="subscriber"?(m(),y("th",ht,"1時間")):g("",!0),gt])])):g("",!0),s("tbody",null,[(m(!0),y(K,null,J(t.channels,d=>(m(),y("tr",{class:"channel text-right",key:d.id},[s("th",pt,[e(B,{class:"channel-name text-left px-0",href:`https://www.youtube.com/${d.customUrl}`,ripple:!1,slim:""},{title:n(()=>[s("span",bt,_(d.name),1)]),prepend:n(()=>[e(S,{class:"avatar",color:d.color.key,variant:"outlined",size:"small"},{default:n(()=>[e(P,{src:d.thumbnails.default.url,alt:d.fullname},null,8,["src","alt"])]),_:2},1032,["color"])]),_:2},1032,["href"])]),s("td",yt,_(f(x)(l(d))),1),t.type==="subscriber"?(m(),w(T,{key:0,class:"px-2 text-h6",value:c(d),strong:u(),tag:"td"},null,8,["value","strong"])):g("",!0),e(T,{class:"pl-2 pr-4 text-h6",value:a(d),strong:u(),tag:"td"},null,8,["value","strong"])]))),128)),t.channels.length===0?(m(),y("tr",xt,[s("td",wt,[e(M,{color:"primary",indeterminate:""})])])):g("",!0)]),t.channels.length!==0?(m(),y("tfoot",Ct,[s("tr",kt,[s("th",$t,[t.type==="subscriber"?(m(),w(L,{key:0,"max-width":"640"},{activator:n(({props:d})=>[e(N,Q(d,{icon:"mdi-information-outline",variant:"plain",density:"compact","aria-label":"チャンネル登録者数について"}),null,16)]),default:n(({isActive:d})=>[e(q,{title:"チャンネル登録者数について"},{default:n(()=>[e(H,null,{default:n(()=>[Nt,Tt]),_:1}),e(H,null,{default:n(()=>[e(z,{class:"text-center",direction:"horizontal",side:"end",size:"small",density:"compact"},{default:n(()=>[e(F,{icon:"mdi-flag-checkered","dot-color":"green"},{default:n(()=>[s("div",Dt,[s("p",null,_(f(x)(f(b)(t.channels,l))),1),Vt])]),_:1}),e(F,{icon:"mdi-flag-checkered","dot-color":"orange-darken-1"},{default:n(()=>[s("div",Pt,[s("p",null,_(f(x)(h())),1),St])]),_:1}),e(F,{icon:"mdi-flag-checkered","dot-color":"red"},{default:n(()=>[s("div",Bt,[s("p",null,_(f(x)(f(b)(t.channels,U=>v(l(U))))),1),Mt])]),_:1})]),_:1})]),_:1}),e(I,null,{default:n(()=>[e(E),e(N,{text:"閉じる",onClick:U=>d.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1})):g("",!0),k(" 合計 ")]),s("td",Ft,_(f(x)(f(b)(t.channels,l))),1),t.type==="subscriber"?(m(),w(T,{key:0,class:"px-2",value:f(b)(t.channels,c),strong:u(),tag:"td"},null,8,["value","strong"])):g("",!0),e(T,{class:"pl-2 pr-4",value:f(b)(t.channels,a),strong:u(),tag:"td"},null,8,["value","strong"])])])):g("",!0)]),_:1})}}});function Y(t,r){let l,c;const a=async function(){try{c=await t(),typeof c<"u"&&(l=setTimeout(a,c*1e3))}catch(u){r&&(c=await r(u),typeof c<"u"&&(l=setTimeout(a,c*1e3)))}};W(async()=>{await a()}),X(()=>{clearInterval(l)})}const Ut={key:0,class:"update-time"},At=V({__name:"UpdateTime",props:{time:null},setup(t){const r=C(Number.NaN),l=Z(()=>r.value>=60?`${Math.floor(r.value/60)}分`:`${r.value}秒`);async function c(){return r.value=D().diff(t.time,"s"),1}return Y(c),tt(()=>t.time,c),(a,u)=>t.time.isValid()&&!Number.isNaN(r.value)?(m(),y("div",Ut,_(`${t.time.format("YYYY/MM/DD HH:mm:ss")} (${l.value}前) 更新`),1)):g("",!0)}}),Yt=s("span",{class:"font-weight-bold"},"チャンネル登録者数",-1),jt=s("span",{class:"font-weight-bold"},"総再生数",-1),zt=s("span",{class:"font-weight-bold"},"配信・動画数",-1),Et=s("ul",null,[s("li",null,"およそ10分ごとに自動で更新されます。数値は減少することがあります"),s("li",null,"総再生数と配信・動画数は配信終了後から反映されます"),s("li",null,"このサイトは非公式のファンサイトです")],-1),It=V({__name:"StatsApp",setup(t){const r=C(),l=C([]),c=C(D(Number.NaN)),a=C("subscriber");return et("streamerChannels",l),Y(async()=>{var h;(h=r.value)==null||h.closeErrorSnackbar();const u=(await A.get(lt)).data,v=(await A.get(ct)).data;return l.value=rt("id",u,v.data),c.value=D.unix(v.fetched_at),Math.max(Math.floor(600-(D().unix()-v.fetched_at))+5,30)},async u=>{var v;return console.error(`Fetching error. Retrying in 10 minutes: ${u}`),(v=r.value)==null||v.showErrorSnackbar(),600}),(u,v)=>{const h=i("v-icon"),o=i("v-tab"),$=i("v-tabs"),P=i("v-card"),S=i("v-col"),B=i("v-row"),M=i("v-footer");return m(),w(it,{ref_key:"appBase",ref:r,"page-id":"stats","toolbar-title":"けもV リアルタイム統計"},{footer:n(()=>[e(M,{class:"bg-secondary text-left d-flex flex-column mt-10"},{default:n(()=>[Et]),_:1})]),default:n(()=>[e(B,{justify:"center"},{default:n(()=>[e(S,{cols:"12",md:"12",lg:"10",xl:"7",xxl:"6"},{default:n(()=>[e($,{modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=N=>a.value=N),color:"primary","align-tabs":"center",density:"compact"},{default:n(()=>[e(o,{value:"subscriber"},{default:n(()=>[e(h,{start:""},{default:n(()=>[k("mdi-account-check")]),_:1}),Yt]),_:1}),e(o,{value:"view"},{default:n(()=>[e(h,{start:""},{default:n(()=>[k("mdi-play")]),_:1}),jt]),_:1}),e(o,{value:"video"},{default:n(()=>[e(h,{start:""},{default:n(()=>[k("mdi-video")]),_:1}),zt]),_:1})]),_:1},8,["modelValue"]),e(Ht,{channels:l.value,type:a.value},null,8,["channels","type"]),e(P,{class:"text-right px-4 py-2",variant:"flat"},{default:n(()=>[e(At,{class:"update-time",time:c.value},null,8,["time"])]),_:1})]),_:1})]),_:1})]),_:1},512)}}}),qt=nt({components:at,directives:ot,icons:{defaultSet:"mdi"},theme:mt}),j=st(It);j.use(qt);j.mount("#app");
