import{d as N,ah as O,ai as L,r as c,o as h,c as g,w as l,h as s,b as w,g as k,F as U,f as b,k as P,l as M,i as B,u as F}from"./kemov-runtime-dom.esm-bundler-R8CT9h3s.js";import{u as q}from"./kemov-main-obZS8aFE.js";import{g as x}from"./kemov-axios-FJ9v1tKH.js";const ne=N({__name:"NavigationDrawer",props:O({channels:null,activeChannelId:null},{opened:{type:Boolean},openedModifiers:{}}),emits:["update:opened"],setup(e){const t=L(e,"opened");return(a,i)=>{const o=c("v-icon"),n=c("v-list-item"),r=c("v-img"),R=c("v-avatar"),p=c("v-progress-circular"),m=c("v-list"),T=c("v-divider"),_=c("v-navigation-drawer");return h(),g(_,{class:"bg-background",modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=d=>t.value=d),floating:"","aria-label":"サイトページ一覧"},{default:l(()=>[s(m,{class:"pb-0 d-flex flex-column fill-height",role:"menu"},{default:l(()=>[s(n,{link:"",title:"リアルタイム統計",href:"/kemov/stats/",role:"menuitem"},{prepend:l(()=>[s(o,{icon:"mdi-finance",size:"large"})]),_:1}),s(m,{nav:"",link:"","active-class":"bg-primary",density:"compact",class:"flex-grow-1 flex-shrink-1 overflow-auto",role:"menu"},{default:l(()=>{var d;return[(h(!0),w(U,null,k(e.channels,u=>(h(),g(n,{key:u.id,title:u.name,subtitle:u.globalname,href:`/kemov/stats/detail/#/${u.id}`,active:e.activeChannelId===u.id,role:"menuitem"},{prepend:l(()=>[s(R,{color:u.color.key,variant:"outlined",size:"small"},{default:l(()=>[s(r,{src:u.thumbnails.default.url,alt:u.fullname},null,8,["src","alt"])]),_:2},1032,["color"])]),_:2},1032,["title","subtitle","href","active"]))),128)),((d=e.channels)==null?void 0:d.length)===0?(h(),g(n,{key:0,class:"pa-4 text-center"},{default:l(()=>[s(p,{color:"primary",indeterminate:""})]),_:1})):b("",!0)]}),_:1}),s(T),s(m,{density:"compact",link:"",nav:"",class:"flex-grow-0 flex-shrink-0",role:"menu"},{default:l(()=>[s(n,{title:"ジェネット楽曲一覧",href:"/kemov/genet/music/","prepend-icon":"mdi-music",role:"menuitem"},{prepend:l(()=>[s(o,{icon:"mdi-music",size:"small"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),E="vuetify-color-scheme",oe=N({__name:"ThemeToggleButton",setup(e){const t=q();function a(){return window.matchMedia?window.matchMedia("(prefers-color-scheme: light)").matches?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"unspecified":"unspecified"}function i(){t.global.current.value.dark?(a()==="light"?localStorage.removeItem(E):localStorage.setItem(E,"light"),t.global.name.value="light"):(a()==="dark"?localStorage.removeItem(E):localStorage.setItem(E,"dark"),t.global.name.value="dark")}function o(n){const r=localStorage.getItem(E);r===null?t.global.name.value=n.matches?"dark":"light":(r==="dark"&&n.matches||r==="light"&&!n.matches)&&localStorage.removeItem(E)}return P(()=>{window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o);const n=localStorage.getItem(E);n==="light"?t.global.name.value="light":n==="dark"||a()==="dark"?t.global.name.value="dark":t.global.name.value="light"}),M(()=>{window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",o)}),(n,r)=>{const R=c("v-btn"),p=c("v-tooltip");return h(),g(p,{text:"テーマを切り替え","aria-label":"テーマを切り替え"},{activator:l(({props:m})=>[s(R,B(m,{icon:F(t).global.current.value.dark?"mdi-weather-night":"mdi-white-balance-sunny",onClick:i,"aria-label":"テーマを切り替え"}),null,16,["icon"])]),_:1})}}});function ae(e){return e==null?"":e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}const re="https://nanase.cc/asset/kemov/channels.json",se="https://s3.ap-northeast-1.amazonaws.com/nanase.asset/kemov/stats.json",H="https://s3.ap-northeast-1.amazonaws.com/nanase.asset/kemov/stats/video/";function ie(e){return`${H}${e}.json`}const G=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);var V=e=>!G.has(e&&e.code);const j=x(V),I="axios-retry";function A(e){const t=["ERR_CANCELED","ECONNABORTED"];return e.response||!e.code||t.includes(e.code)?!1:j(e)}const S=["get","head","options"],Y=S.concat(["put","delete"]);function v(e){return e.code!=="ECONNABORTED"&&(!e.response||e.response.status>=500&&e.response.status<=599)}function z(e){var t;return(t=e.config)!=null&&t.method?v(e)&&S.indexOf(e.config.method)!==-1:!1}function y(e){var t;return(t=e.config)!=null&&t.method?v(e)&&Y.indexOf(e.config.method)!==-1:!1}function D(e){return A(e)||y(e)}function X(){return 0}function $(e=0,t=void 0,a=100){const i=2**e*a,o=i*.2*Math.random();return i+o}const K={retries:3,retryCondition:D,retryDelay:X,shouldResetTimeout:!1,onRetry:()=>{}};function J(e,t){return{...K,...t,...e[I]}}function C(e,t){const a=J(e,t||{});return a.retryCount=a.retryCount||0,a.lastRequestTime=a.lastRequestTime||Date.now(),e[I]=a,a}function Z(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}async function Q(e,t){const{retries:a,retryCondition:i}=e,o=(e.retryCount||0)<a&&i(t);if(typeof o=="object")try{return await o!==!1}catch{return!1}return o}const f=(e,t)=>{const a=e.interceptors.request.use(o=>(C(o,t),o)),i=e.interceptors.response.use(null,async o=>{const{config:n}=o;if(!n)return Promise.reject(o);const r=C(n,t);if(await Q(r,o)){r.retryCount+=1;const{retryDelay:R,shouldResetTimeout:p,onRetry:m}=r,T=R(r.retryCount,o);if(Z(e,n),!p&&n.timeout&&r.lastRequestTime){const _=Date.now()-r.lastRequestTime,d=n.timeout-_-T;if(d<=0)return Promise.reject(o);n.timeout=d}return n.transformRequest=[_=>_],await m(r.retryCount,o,n),new Promise(_=>{setTimeout(()=>_(e(n)),T)})}return Promise.reject(o)});return{requestInterceptorId:a,responseInterceptorId:i}};f.isNetworkError=A;f.isSafeRequestError=z;f.isIdempotentRequestError=y;f.isNetworkOrIdempotentRequestError=D;f.exponentialDelay=$;f.isRetryableError=v;export{ne as _,f as a,oe as b,re as c,se as s,ie as v,ae as w};
